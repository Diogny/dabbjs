/* @license MIT, dabbjs 0.0.18 (c) 2020 Diogny A. B. <diognyab@outlook.com> */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).dabbjs={})}(this,(function(t){"use strict";var n=function(){function t(){}return t.x=function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},t.query=function(t,n){var e=[];for(var r in t)e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return(n&&e.length?"?":"")+e.join("&")},t.update=function(t,n){for(var e in t)n[e]=n[e]||t[e];return n},t.send=function(n,e){return new Promise((function(r,i){var o=t.x();e=t.update(t.xobj,e),o.open(e.method,n,!0),o[t.rt]=e.responseType,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.onreadystatechange=function(){if(4==o.readyState){var n=o[t.rt]&&"json"==o[t.rt];200===o.status||304===o.status?r(n?o.response:o.responseText):i({status:o.status,d:o.response,xhr:o})}},e.method==t.sPost&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onerror=function(t){i(t)};try{o.send(e.data)}catch(t){i({status:o.status,statusText:o.statusText,xhr:o})}}))},t.get=function(n,e){return(e=e||{}).method=t.sGet,n+=t.query(e.data,!0),e.data=void 0,t.send(n,e)},t.post=function(n,e){return(e=e||{}).method=t.sPost,e.data=t.query(e.data,!1),t.send(n,e)},t.sGet="GET",t.sPost="POST",t.xobj={method:t.sGet,data:void 0,responseType:"text"},t.rt="responseType",t}();function e(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),u=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return u}function r(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(e(arguments[n]));return t}var i={s:"string",o:"object",b:"boolean",i:"integer",n:"number",a:"array",fn:"function",sp:"super",c:"color",t:"type",d:"defaut",u:"undefined",v:"value",svgNs:"http://www.w3.org/2000/svg"},o=function(t){return{}.toString.call(t)},u=function(t){return null==typeof t||!t||c(t)&&null!==t.match(/^ *$/)},s=function(t){return typeof t===i.fn},a=function(t){return null!=t},c=function(t){return typeof t===i.s},f=function(t){return Array.isArray(t)},h=function(t,n){return n|=0,Number(Math.round(Number(t+"e"+n))+"e-"+n)},p=function(t){if(null==t||"object"!=typeof t)return!1;var n=Object.getPrototypeOf(t);return!n||"Object"===n.constructor.name},l=function(t){if(!p(t))return t;var n=Object.create(null);for(var e in t)if(!t.hasOwnProperty||t.hasOwnProperty(e)){var r=t[e];n[e]=p(r)?l(r):r}return n},d=function(t,n){if(c(n))return t.getAttribute(n);for(var e in n)t.setAttribute(e,n[e]);return t},y=function(t,n,e,r){return t.addEventListener(n,e,r)},g=function(t){return t.filter((function(n,e){return t.indexOf(n)===e}))},m={TRUE:!0,True:!0,true:!0,1:!0,FALSE:!1,False:!1,false:!1,0:!1},w=function(t,n){var e,r=!1,i=t.split(",").map((function(t){return e=parseFloat(t),isNaN(e)&&(r=!0),e}));return r||i.length!=n?void 0:i},x=Object.freeze({__proto__:null,consts:i,ts:o,empty:u,typeOf:function(t){return o(t).slice(8,-1).toLowerCase()},isFn:s,dfnd:a,isStr:c,isObj:function(t){return typeof t===i.o},isArr:f,isNum:function(t){return typeof t===i.n},isNumeric:function(t){return!isNaN(t)&&(0|(t=parseInt(t)))===t},isInt:function(t){return parseFloat(t)==parseInt(t)&&!isNaN(t)},pInt:function(t,n){return parseInt(t,n)},clamp:function(t,n,e){return t<=n?n:t>=e?e:t},round:h,splat:function(t){return f(t)?t:a(t)?[t]:[]},extend:function(t,n){return p(n)&&Object.keys(n).forEach((function(e){t[e]=n[e]})),t},copy:function(t,n){return p(n)&&Object.keys(t).forEach((function(e){var r=n[e];a(r)&&(t[e]=r)})),t},inherit:function(t,n){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},isDOM:function(t){return t instanceof window.HTMLElement||t instanceof window.HTMLDocument},pojo:p,obj:l,clone:function(t){return JSON.parse(JSON.stringify(t))},defEnum:function(t){for(var n in t)t[t[n]]=n;return t},css:function(t,n){return c(n)?t.style[n]:(Object.assign(t.style,n),t)},attr:d,aEL:y,rEL:function(t,n,e,r){return t.removeEventListener(n,e,r)},daEl:function(t,n,e){return document.addEventListener(t,n,e)},drEL:function(t,n,e){return document.removeEventListener(t,n,e)},dP:function(t,n,e){return Object.defineProperty(t,n,e)},aChld:function(t,n){return t.appendChild(n)},hCl:function(t,n){return t.classList.contains(n)},aCl:function(t,n){return t.classList.add(n)},rCl:function(t,n){return t.classList.remove(n)},tCl:function(t,n,e){return t.classList.toggle(n,e)},range:function(t,n){return Array.from("x".repeat(n-t),(function(n,e){return t+e}))},unique:g,union:function(t,n){return g(t.concat(n))},aClx:function(t,n){var e;return(e=t.classList).add.apply(e,r((n||"").split(" ").filter((function(t){return!u(t)})))),t},selectMany:function(t,n){return t.reduce((function(t,e){return t.push.apply(t,r(n(e))),t}),new Array)},toBool:function(t){return m[t]},isBool:function(t){return null!=m[t]},fBool:function(t,n){return m[t]||!!n},parse:w}),v=function(){function t(t,n){this.x=Math.round(t),this.y=Math.round(n)}return t.prototype.distance=function(t){var n=this.x-t.x,e=this.y-t.y;return Math.sqrt(n*n+e*e)},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.add=function(n,e){return new t(this.x+n,this.y+e)},t.prototype.mul=function(n,e){return new t(this.x*n,this.y*e)},t.prototype.equal=function(t){return this.x==t.x&&this.y==t.y},t.prototype.toString=function(t){var n=0!=(2&(t|=0)),e=0!=(1&t);return(e?"(":"")+(n?"x: ":"")+h(this.x,1)+", "+(n?"y: ":"")+h(this.y,1)+(e?")":"")},Object.defineProperty(t.prototype,"str",{get:function(){return this.x+", "+this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quadrant",{get:function(){return 0==this.x||0==this.y?this.x==this.y?0:-1:this.y>0?this.x>0?1:2:this.x<0?3:4},enumerable:!1,configurable:!0}),t.rotateBy=function(t,n,e,r,i){var o=Math.PI/180*i,u=Math.cos(o),s=Math.sin(o);return{x:0|u*(t-e)+s*(n-r)+e,y:0|u*(n-r)-s*(t-e)+r}},t.validateRotation=function(t){return(t=(0|t)%360)<0&&(t+=360),t},Object.defineProperty(t,"origin",{get:function(){return new t(0,0)},enumerable:!1,configurable:!0}),t.create=function(n){return new t(n.x,n.y)},t.parse=function(n){var e=w(n,2);return e&&new t(e[0],e[1])},t.scale=function(n,e){return new t(e*n.x,e*n.y)},t.translateBy=function(n,e,r){return new t(n.x+e,n.y+r)},t.times=function(n,e,r){return new t(n.x*e,n.y*r)},t.minus=function(n,e){return new t(n.x-e.x,n.y-e.y)},t.plus=function(n,e){return new t(n.x+e.x,n.y+e.y)},t.inside=function(t,n){return t.x>=0&&t.x<=n.width&&t.y>=0&&t.y<=n.height},t}(),b=function(){function t(t,n){this.x=t,this.y=n}return t.prototype.length=function(){return Math.sqrt(this.dot(this))},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.det=function(t){return this.x*t.y-this.y*t.x},t.prototype.angleTo=function(t){return Math.atan2(this.det(t),this.dot(t))},t.prototype.add=function(n){return"number"==typeof n?new t(this.x+n,this.y+n):new t(this.x+n.x,this.y+n.y)},t.prototype.sub=function(n){return"number"==typeof n?new t(this.x-n,this.y-n):new t(this.x-n.x,this.y-n.y)},t.prototype.mul=function(n){return"number"==typeof n?new t(this.x*n,this.y*n):new t(this.x*n.x,this.y*n.y)},t.prototype.div=function(n){return"number"==typeof n?new t(this.x/n,this.y/n):new t(this.x/n.x,this.y/n.y)},t.prototype.unit=function(){return this.div(this.length())},t.prototype.clone=function(){return new t(this.x,this.y)},t.empty=function(){return new t(0,0)},t}(),M=function(t,n){return new Array(Math.max(0,n-t.length+1)).join(" ")+t},j=function(t,n){if(s(n)&&t){var e=0;for(var r in t)t.hasOwnProperty&&!t.hasOwnProperty(r)||n(t[r],r,e++)}},O=function(t,n){return(n||document).querySelector(t)},S=function(t,n){return(n||document).querySelectorAll(t)},L=Object.freeze({__proto__:null,DOMTemplates:function(){var t={};return Array.from(S("script[data-tmpl]")).forEach((function(n){var e=n.getAttribute("data-tmpl"),r=n.innerHTML.replace("<![CDATA[","").replace("]]>","").replace(/[\r\n\t]/g,"").trim();t[e]=r})),t},pad:function(t,n,e){return new Array(Math.max(0,(n||2)+1-String(t).length)).join(e||"0")+t},fillChar:function(t,n){return new Array(n+1).join(t)},padStr:M,formatNumber:function(t,n){return M(t+"",n)},tag:function(t,n,e){return n&&(e.id=n),d(document.createElementNS(i.svgNs,t),e)},svg:function(t){var n=document.createElementNS(i.svgNs,"template");return n.innerHTML=t,n.children[0]},html:function(t){var n=document.createElement("template");return n.innerHTML=t,n.content.firstChild},arrow:function(t,n,e,r){var i=new b(n.x-t.x,n.y-t.y),o=Math.atan2(i.y,i.x),u=function(t){return new v(n.x-e*Math.cos(t),n.y-e*Math.sin(t))};return{ang:o,v:i,a:u(o-r),b:u(o+r)}},each:j,map:function(t,n){var e=[];return j(t,(function(t,r,i){e.push(n(t,r,i))})),e},filter:function(t,n){var e={};return j(t,(function(t,r,i){n(t,r,i)&&(e[r]=t)})),e},filterArray:function(t,n){var e=[];return j(t,(function(t,r,i){var o=n(t,r,i);!0===o?e.push(t):p(o)&&e.push(o)})),e},prop:function(t,n,e){for(var r,i=n.split(".").map((function(t){return t.trim()})),o=i.pop(),u=0;t&&u<i.length;u++)t=t[i[u]];return r=t&&t[o],null!=e?null!=r&&(t[o]=e,!0):r},ready:function(t){return!!s(t)&&("loading"!=document.readyState?(t(),!0):(document.addEventListener?y(document,"DOMContentLoaded",t,!1):document.attachEvent("onreadystatechange",(function(){"complete"==document.readyState&&t()})),!0))},qS:O,qSA:S,gEId:function(t){return document.getElementById(t)},basePath:function(){var t=O('meta[name="base"]');return t?t.getAttribute("content"):""},matrix:function(t,n,e){return Array.from({length:t},(function(){return new Array(n).fill(e)}))},cssCamel:function(t){return t.replace(/\-([a-z])/gi,(function(t,n){return n.toUpperCase()}))},cssUncamel:function(t){return t.replace(/([A-Z])/g,(function(t,n){return"-"+n.toLowerCase()}))},camel:function(t){return t.replace(/([a-z])(\w*)/gi,(function(t,n,e){return n.toUpperCase()+e}))}}),A=function(){function t(t,n){this.width=Math.round(t),this.height=Math.round(n)}return t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.equal=function(t){return this.width==t.width&&this.height==t.height},Object.defineProperty(t.prototype,"positive",{get:function(){return this.width>=0&&this.height>=0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"empty",{get:function(){return new t(0,0)},enumerable:!1,configurable:!0}),t.create=function(n){return new t(n.width,n.height)},t.parse=function(n){var e=w(n,2);return e&&new t(e[0],e[1])},t.prototype.toString=function(t){var n=0!=(1&(t|=0)),e=0!=(2&t),r=0!=(4&t);return(n?"(":"")+(e?"w: ":r?"width: ":"")+h(this.width,1)+", "+(e?"h: ":r?"height: ":"")+h(this.height,1)+(n?")":"")},Object.defineProperty(t.prototype,"str",{get:function(){return this.width+", "+this.height},enumerable:!1,configurable:!0}),t}(),C=function(){function t(t,n,e,r){this.x=t,this.y=n,this.width=e,this.height=r}return Object.defineProperty(t.prototype,"empty",{get:function(){return this.width<0||this.height<0},enumerable:!1,configurable:!0}),t.prototype.inside=function(t){return t.x>=this.x&&t.y>=this.y&&t.x<=this.x+this.width&&t.y<=this.y+this.height},t.prototype.intersect=function(t){var n=Math.max(this.x,t.x),e=Math.max(this.y,t.y);return t.width=Math.min(this.x+this.width,t.x+t.width)-n,t.height=Math.min(this.y+this.height,t.y+t.height)-e,t.x=n,t.y=e,!t.empty},t.prototype.clone=function(){return t.create(this)},t.prototype.contains=function(t){return t.x>=this.x&&t.y>=this.y&&t.x+t.width<=this.x+this.width&&t.y+t.height<=this.y+this.height},t.prototype.add=function(n){var e=Math.min(this.x,n.x),r=Math.min(this.y,n.y);return new t(e,r,Math.max(this.x+this.width,n.x+n.width)-e,Math.max(this.y+this.height,n.y+n.height)-r)},t.prototype.move=function(t,n){this.x=0|t,this.y=0|n},t.prototype.grow=function(n,e){return new t(this.x-n,this.y-e,this.width+2*n,this.height+2*e)},t.prototype.translate=function(n,e){return new t(this.x+n,this.y+e,this.width,this.height)},t.prototype.scale=function(n,e){return new t(this.x*n,this.y*e,this.width*n,this.height*e)},t.prototype.equal=function(t){return this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},t.create=function(n,e){var r=new t(n.x,n.y,n.width,n.height);return e&&(r.x=0|r.x,r.y=0|r.y,r.width=0|r.width,r.height=0|r.height),r},Object.defineProperty(t,"empty",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.parse=function(n){var e=w(n,4);return e&&new t(e[0],e[1],e[2],e[3])},Object.defineProperty(t.prototype,"str",{get:function(){return this.x+", "+this.y+", "+this.width+", "+this.height},enumerable:!1,configurable:!0}),t}(),P=function(){function t(t,n,e){this.r=t,this.g=n,this.b=e}return t.scale=function(n,e){return new t(n*e.r,n*e.g,n*e.b)},t.plus=function(n,e){return new t(n.r+e.r,n.g+e.g,n.b+e.b)},t.times=function(n,e){return new t(n.r*e.r,n.g*e.g,n.b*e.b)},t.toDrawingColor=function(t){var n=function(t){return t>1?1:t};return{r:Math.floor(255*n(t.r)),g:Math.floor(255*n(t.g)),b:Math.floor(255*n(t.b))}},t.white=new t(1,1,1),t.grey=new t(.5,.5,.5),t.black=new t(0,0,0),t.background=t.black,t.defaultColor=t.black,t}(),T=function(){function t(){}return t.get=function(n){return t.map.get(n)},t.set=function(n,e){t.map.set(n,e)},Object.defineProperty(t,"size",{get:function(){return t.map.size},enumerable:!1,configurable:!0}),t.register=function(n){for(var e in n)t.set(e,n[e])},t.nano=function(n,e){return t.get(n).replace(/\{\{\s*([\w\.]*)\s*\}\}/g,(function(t,n){for(var r=n.split("."),i=e[r.shift()],o=0,u=r.length;i&&u>o;o++)i=i[r[o]];return null!=i?i:"null"}))},t.parse=function(n,e,r){var i=N.parse(t.get(n),"text/html"),o=new Map,u=function(t,n){for(var e=t.split("."),r=n[e.shift()],i=0,o=e.length;r&&o>i;i++)r=r[e[i]];return r},s=function(t){var n=o.get(t);return!n&&o.set(t,n=u(t,e)),n},a=function(t,n,e,r){for(var i=!1,o=Array.from(t.attributes),a=function(t){for(var o,a=/\{\{\s*([\w\.]*)\s*\}\}/g,c="",f=0;o=a.exec(t);)c+=t.substr(f,o.index-f),i=!0,n==o[1]?c+=e[r]:n&&o[1].startsWith(n+".")?c+=u(o[1].substr(n.length+1),e[r]):c+=s(o[1]),f=o.index+o[0].length;return c+=t.substr(f,t.length-f)},c=0;c<o.length;c++){var h=o[c],p=h.name,l="d-for-ndx"==p,d=p.endsWith("?"),y=void 0;i=!1,l?(p=h.value,y=r):(y=a(h.value),d&&(p=p.substr(0,p.length-1))),d||l?(t.removeAttribute(h.name),"undefined"!=y&&t.setAttribute(p,y)):i&&(h.value=y)}t.children.length?f(t,n,e,r):t.firstChild&&(t.firstChild.nodeValue=a(t.firstChild.nodeValue))},c=function(t,n,r,i){var o,u=t.getAttribute("d-for");if(u){if(n)throw"nested @for not supported";t.removeAttribute("d-for");var s=u.match(/(\w*)\s+in\s+(\w*)/),c=s?e[s[2]]:void 0;if(!c)throw"invalid %for template";return c.forEach((function(n,e){var r,i=t.cloneNode(!0);null===(r=t.parentElement)||void 0===r||r.insertBefore(i,t),a(i,s[1],c,e)})),null===(o=t.parentElement)||void 0===o||o.removeChild(t),c.length}return a(t,n,r,i),1},f=function(t,n,e,r){for(var i=0,o=t.children[i];i<t.children.length;o=t.children[i])i+=c(o,n,e,r)};return f(i.body,void 0,void 0,void 0),r?N.prettify(i.body.firstChild):i.body.innerHTML},t.map=new Map,t}(),N={parse:function(t,n){return void 0===n&&(n="text/xml"),(new DOMParser).parseFromString(t,n)},stringify:function(t){return(new XMLSerializer).serializeToString(t)},transform:function(t,n){var e=new XSLTProcessor;e.importStylesheet("string"==typeof n?N.parse(n):n);var r=e.transformToFragment("string"==typeof t?N.parse(t):t,document);return"string"==typeof t?N.stringify(r):r},minify:function(t){return N.toString(t,!1)},prettify:function(t){return N.toString(t,!0)},toString:function(t,n,e,r){void 0===e&&(e=0),void 0===r&&(r=!1),"string"==typeof t&&(t=N.parse(t));var i=n?Array(e+1).fill("").join("\t"):"",o=n?"\n":"";if(3==t.nodeType){var u=(r?"":i)+t.textContent.trim();return u.trim()?u+(r?"":o):""}if(!t.tagName)return N.toString(t.firstChild,n);for(var s=i+"<"+t.tagName,a=0;a<t.attributes.length;a++)s+=" "+t.attributes[a].name+'="'+t.attributes[a].value+'"';if(0==t.childNodes.length)return s+" />"+o;s+=">";var c=1==t.childNodes.length&&3==t.childNodes[0].nodeType;c||(s+=o);for(a=0;a<t.childNodes.length;a++)s+=N.toString(t.childNodes[a],n,e+1,c);return s+(c?"":i)+"</"+t.tagName+">"+o}};t.Color=P,t.Point=v,t.Rect=C,t.Size=A,t.Templates=T,t.XML=N,t.ajaxp=n,t.dab=x,t.utils=L,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=dabbjs.umd.min.js.map
